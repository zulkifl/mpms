/*!
 * @copyright Copyright &copy; Kartik Visweswaran, Krajee.com, 2014 - 2015
 * @version 1.0.0
 *
 * Krajee IP Information fetcher plugin using PHP API from hostip.info. The plugin is built to work with
 * `kartik-v/yii2-ipinfo` extension. The plugin refreshes IP information via AJAX on document load.
 *
 * @see http://api.hostip.info
 *
 * Author: Kartik Visweswaran
 * Copyright: 2015, Kartik Visweswaran, Krajee.com
 * For more JQuery plugins visit http://plugins.krajee.com
 * For more Yii related demos visit http://demos.krajee.com
 */!function(t){"use strict";var e=function(e,n){var r=this;r.$element=t(e),r.init(n)};e.prototype={constructor:e,init:function(e){var n=this,r=n.$element;t.each(e,function(t,e){n[t]=e}),t.ajax({url:n.url,type:"GET",dataType:"json",data:n.params,beforeSend:function(t){r.trigger("beforesend.kvipinfo",[t])},success:function(e,a,o){var i,c,s=e,f="";r.trigger("success.kvipinfo",[e,a,o]),s&&"XX"!==s.country_code?(t.each(n.fields,function(t,e){void 0!==s[e]&&(f+="<tr><th>"+n.defaultFields[e]+"</th><td>"+s[e]+"</td></tr>\n")}),f?(i=t(document.createElement("table")).attr(n.contentOptions).append(f),c=t(document.createElement("div")).append(i).append(n.credits),r.html(c.html()),c.remove()):r.html(n.noData+"\n"+n.credits)):r.html(n.noData+"\n"+n.credits)},error:function(t,e,a){r.trigger("error.kvipinfo",[t,e,a]).html(n.errorData+"\n"+n.credits)}})}},t.fn.kvIpInfo=function(n){var r=Array.apply(null,arguments);return r.shift(),this.each(function(){var a,o=t(this),i=o.data("kvIpInfo"),c="object"==typeof n&&n;i||(a=t.extend({},t.fn.kvIpInfo.defaults),i=new e(this,t.extend(a,c,o.data())),o.data("kvIpInfo",i)),"string"==typeof n&&i[n].apply(i,r)})},t.fn.kvIpInfo.defaults={fields:[],defaultFields:{},url:"",params:{},credits:"",contentOptions:{},noData:"",errorData:""},t.fn.kvIpInfo.Constructor=e}(window.jQuery);